---
title: "Installing packages"
subtitle: "Tips to install some of the packages"
author: "Joe Watson & Marie Auger-Méthé"
date: "07/01/2021"
output: 
  html_document:
    css: "CSSdefs.css"
    after_body: footer.html
---


```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
```

## Installing packages: tips to install some of the packages

Some of the packages we will use in the workshop are not available on CRAN and some require the installation of additional software and compilers.

### Compilers

C++ compilers are needed. 

For Mac, installing Xcode is an easy way to achieve this. Xcode is a very large program, so its worth checking if you already have it installed. If not, open terminal and run:

```{r,eval=F}
xcode-select --install
```

For Windows, installing Rtools is an easy way to achieve this: Rtools is found [here](https://cran.r-project.org/bin/windows/Rtools/index.html)

For Linux, the neccessary compilers are installed by default with R. To double check they are installed run:

```{r,eval=F}
gcc --version
```

If nothing is returned, then they can be installed manually as follows:

```{r,eval=F}
sudo apt update
sudo apt install build-essential
```


### Required GIS software
The latest version of gdal and geos is **required**. The workshop material **will not work without these**.
*Note new version of some of these GIS software and packages (e.g., sp) have made significant changes and might affect other code.*

On Mac, installing these is easiest done using homebrew. With homebrew installed, open terminal and run:

```{r,eval=F}
brew tap osgeo/osgeo4mac && brew tap --repair
brew install pkg-config
brew install proj
brew install geos
brew install gdal
```

On Windows, express install osgeo4w [here](https://trac.osgeo.org/osgeo4w/). This will install the PROJ, GDAL, and GEOS libraries.

On Linux, run the following in the terminal:
```{r,eval=F}
sudo add-apt-repository ppa:ubuntugis/ubuntugis-unstable
sudo apt-get update
sudo apt-get install libudunits2-dev libgdal-dev libgeos-dev libproj-dev 
```


### Installing the latest version of the spatial packages

The latest version of rgdal, rgeos, and sp are **required**. The workshop material **will not work without these**. These can be installed **after** the latest GIS software has been installed.

```{r,eval=F}
install.packages(c('rgdal','rgeos','sp','sf','spdep','maptools','spatstat'), dep=T)
```


### Packages not available on CRAN

Our methodology highly depends on the INLA package. This package must be installed directly from the [www.r-inla.org](https://www.r-inla.org) website. To do so, you can run the following in R:

```{r eval=FALSE}
install.packages("INLA", repos=c(getOption("repos"), INLA="https://inla.r-inla-download.org/R/stable"), dep=TRUE)
```

For more details, see [www.r-inla.org/download-install](https://www.r-inla.org/download-install).


### Packages that require a special version

inlabru is available on CRAN, but the version we need for this workshop is the new version **only available on GithHub**.

To install packages from GitHub, we will use the package `remotes`.

```{r,eval=F}
install.packages('remotes')
```

Next, we will install `inlabru`

```{r eval=FALSE}
remotes::install_github("inlabru-org/inlabru", ref="stable")
```


### Packages available on CRAN

The remaining packages should be updated via CRAN (using install.packages()):

+ lubridate
+ maptools
+ readxl
+ ggmap
+ raster

### Check that all packages are installed

Once all the packages are installed, you can check that they are properly installed by loading them.

```{r warning=FALSE, message=FALSE, error=FALSE, eval=FALSE}
library(rgdal)
library(rgeos)
library(sp)
library(sf)
library(maptools)
library(spatstat)
library(spdep)
library(INLA)
library(inlabru)
library(readxl)
library(lubridate)
library(ggmap)
library(raster)
```
